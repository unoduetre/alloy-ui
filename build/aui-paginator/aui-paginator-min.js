AUI.add("aui-paginator",function(ag){var W=ag.Lang,f=W.isArray,ax=W.isBoolean,av=W.isFunction,N=W.isNumber,F=W.isObject,aE=W.isString,B="alwaysVisible",o="boundingBox",C="circular",c="container",I="containers",ab="content",ap="current",V=".",x="first",ai="firstPageLink",aL="firstPageLinkLabel",g="last",K="lastPageLink",aH="lastPageLinkLabel",ac="link",al="maxPageLinks",m="next",au="nextPageLink",af="nextPageLinkLabel",aA="option",p="page",w="pageContainerTemplate",J="pageLinkContent",H="pageLinkTemplate",e="pageReportEl",u="pageReportLabelTemplate",ak="paginator",aw="per",ay="prev",j="prevPageLink",b="prevPageLinkLabel",Z="report",k="rows",aj="rowsPerPage",aG="rowsPerPageEl",t="rowsPerPageOptions",M="select",aB="selected",r=" ",S="state",at="template",ae="total",O="totalEl",U="totalLabel",ad="totalPages",aF=function(){return Array.prototype.slice.call(arguments).join(r);},aI=function(A){return(A instanceof ag.NodeList);},aJ=function(A){return parseInt(A,10)||0;},E=ag.getClassName,ar=ag.UA.ie,y=E(ak),s=E(ak,c),am=E(ak,ab),z=E(ak,ap,p),aK=E(ak,x,ac),l=E(ak,g,ac),aC=E(ak,ac),d=E(ak,m,ac),a=E(ak,p,c),ao=E(ak,p,ac),v=E(ak,ap,p,Z),an=E(ak,ay,ac),q=E(ak,k,aw,p),i=E(ak,ae),T="(Total {total})",Q="({page} of {totalPages})",Y="{FirstPageLink} {PrevPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport} {Total} {RowsPerPageSelect}",aq="&gt;",P="&lt;",h='<a href="#" class="'+aF(aC,aK)+'"></a>',aa='<a href="#" class="'+aF(aC,l)+'"></a>',G='<a href="#" class="'+aF(aC,d)+'"></a>',aD="<span></span>",X='<a href="#"></a>',n='<span class="'+aF(v)+'"></span>',az='<a href="#" class="'+aF(aC,an)+'"></a>',ah='<select class="'+q+'"></select>',R='<span class="'+aF(i)+'"></span>';var D=ag.Component.create({NAME:ak,ATTRS:{alwaysVisible:{value:true,validator:ax},circular:{value:false,validator:ax},containers:{writeOnce:true,setter:function(L){var A=this;if(aI(L)){return L;}else{if(aE(L)){return ag.all(L);}}return new ag.NodeList([L]);}},firstPageLink:{setter:ag.one,valueFn:function(){var A=this.get(aL);return ag.Node.create(h).html(A);}},firstPageLinkLabel:{value:x,validator:aE},lastPageLink:{setter:ag.one,valueFn:function(){var A=this.get(aH);return ag.Node.create(aa).html(A);}},lastPageLinkLabel:{value:g,validator:aE},maxPageLinks:{value:10,getter:function(A){var L=this.get(ad);return Math.min(L,A);},validator:N},nextPageLink:{setter:ag.one,valueFn:function(){var A=this.get(af);return ag.Node.create(G).html(A);}},nextPageLinkLabel:{value:aF(m,aq),validator:aE},page:{setter:aJ,value:1},pageContainerTemplate:{getter:function(A){return ag.Node.create(A).addClass(a);},value:aD,validator:aE},pageLinkContent:{value:function(aM,A,L){aM.html(A);},validator:av},pageLinkTemplate:{getter:function(A){var L=ag.Node.create(A);return L.addClass(aF(aC,ao));},value:X,validator:aE},pageReportEl:{setter:ag.one,valueFn:function(){var A=this.get(u);return ag.Node.create(n).html(A);}},pageReportLabelTemplate:{getter:function(){var A=this;return W.sub(Q,{page:A.get(p),totalPages:A.get(ad)});},validator:aE},prevPageLink:{setter:ag.one,valueFn:function(){var A=this.get(b);return ag.Node.create(az).html(A);}},prevPageLinkLabel:{value:aF(P,ay),validator:aE},rowsPerPageOptions:{value:{},validator:f},rowsPerPage:{setter:aJ,value:1},rowsPerPageEl:{setter:ag.one,getter:function(aN){var A=this;var L=aN.all(aA);L.removeAttribute(aB);var aM=L.filter("[value="+A.get(aj)+"]");if(aM){aM.setAttribute(aB,aB);}return aN;},valueFn:function(){return ag.Node.create(ah);}},state:{setter:"_setState",getter:"_getState",value:{},validator:F},template:{getter:"_getTemplate",writeOnce:true,value:Y,validator:aE},total:{setter:"_setTotal",value:0,validator:N},totalEl:{setter:ag.one,getter:function(){var A=this.get(U);return ag.Node.create(R).html(A);}},totalLabel:{getter:function(){var A=this;return W.sub(T,{total:A.get(ae)});},validator:aE},totalPages:{readOnly:true,getter:function(A){return Math.ceil(this.get(ae)/this.get(aj));}}},prototype:{lastState:null,templatesCache:null,renderUI:function(){var A=this;var L=A.get(I);L.unselectable();A._renderRowsPerPageOptions();A._renderTemplateUI();L.addClass(s);},bindUI:function(){var A=this;A._delegateDOM();A.publish("changeRequest");A.after("stateChange",ag.bind(A._afterSetState,A));A.before("stateChange",ag.bind(A._beforeSetState,A));A.after("maxPageLinksChange",ag.bind(A._renderTemplateUI,A));A.after("rowsPerPageChange",ag.bind(A._renderTemplateUI,A));A.after("totalChange",ag.bind(A._renderTemplateUI,A));},syncUI:function(){var A=this;A.changeRequest();},destructor:function(){var A=this;A.get(I).remove(true);},_syncPageLinksUI:function(){var A=this;var aN=A.get(I);var aM=A.get(p);var L=A.calculateRange(aM);aN.each(function(aQ){var aP=0;var aO=L.start;var aS=aQ.all(V+ao);if(aS){aS.removeClass(z);while(aO<=L.end){var aR=aS.item(aP);A.get(J).apply(A,[aR,aO,aP]);aR.setAttribute(p,aO);if(aO==aM){aR.addClass(z);}aP++;aO++;}}});},_syncPageReportUI:function(L){var A=this;var aM=A.get(I);aM.each(function(aN){var aO=aN.one(V+v);if(aO){aO.html(A.get(u));}});},calculateRange:function(aN){var A=this;var aM=A.get(ad);var aQ=A.get(al);var aO=Math.ceil(aQ/2);var aP=Math.min(Math.max(aN-aO,1),(aM-aQ+1));var L=Math.min(aP+aQ-1,aM);return{start:aP,end:L};},changeRequest:function(){var A=this;var aN=A.get(S);if(A.get(C)){var aM=aN.page;var L=aN.totalPages;if(aN.before&&(aN.before.page==aM)){if(aM<=1){aN.page=L;}else{if(aM>=L){aN.page=1;}}A.set(S,aN);}}A.fire("changeRequest",{state:aN});},eachContainer:function(L){var A=this;A.get(I).each(function(aM){if(aM){L.apply(A,arguments);}});},hasNextPage:function(){var A=this;return A.hasPage(A.get(p)+1);},hasPage:function(aM){var A=this;var L=A.get(ad);return((aM>0)&&(aM<=L));},hasPrevPage:function(){var A=this;return A.hasPage(A.get(p)-1);},_renderRowsPerPageOptions:function(){var A=this;var aM=0;var L=A.get(aG);var aN=A.get(t);ag.each(aN,function(aO){L.getDOM().options[aM++]=new Option(aO,aO);});},_renderTemplateUI:function(){var A=this;var L=A.get(I);A.templatesCache=null;L.html(A.get(at));
A._syncPageLinksUI();A._syncPageReportUI();A._bindDOMEvents();},setState:function(L){var A=this;A.set(S,L);},_getState:function(L){var A=this;return{before:A.lastState,paginator:A,page:A.get(p),total:A.get(ae),totalPages:A.get(ad),rowsPerPage:A.get(aj)};},_getTemplate:function(L){var A=this;if(!A.templatesCache){var aO=0;var aQ=A.get(al);var aN=A.get(w);while(aO++<aQ){aN.append(A.get(H));}var aM=function(aR){return A.get(aR).outerHTML();};var aP=aM(aG);if(ar>=9){aP=aP.replace(/selected=""/gi,"");}A.templatesCache=W.sub(L,{CurrentPageReport:aM(e),FirstPageLink:aM(ai),LastPageLink:aM(K),NextPageLink:aM(au),PageLinks:aN.outerHTML(),PrevPageLink:aM(j),RowsPerPageSelect:aP,Total:aM(O)});}return A.templatesCache;},_setState:function(L){var A=this;ag.each(L,function(aN,aM){A.set(aM,aN);});return L;},_setTotal:function(aM){var A=this;var L=A.get(B);var aN=A.get(I);var aO=(L||(aM!==0&&aM>A.get(aj)));aN.toggle(aO);return aM;},_afterSetState:function(L){var A=this;A._syncPageLinksUI();A._syncPageReportUI();},_beforeSetState:function(L){var A=this;A.lastState=L.prevVal;},_onClickFirstLinkEl:function(L){var A=this;A.set(p,1);A.changeRequest();L.halt();},_onClickPrevLinkEl:function(L){var A=this;var aM=A.get(p);A.set(p,(A.hasPrevPage()?aM-1:aM));A.changeRequest();L.halt();},_onClickPageLinkEl:function(aM){var A=this;var L=aM.currentTarget.attr(p);A.set(p,L);A.changeRequest();aM.halt();},_onClickNextLinkEl:function(L){var A=this;var aM=A.get(p);A.set(p,(A.hasNextPage()?aM+1:aM));A.changeRequest();L.halt();},_onClickLastLinkEl:function(aM){var A=this;var L=A.get(ad);A.set(p,L);A.changeRequest();aM.halt();},_bindDOMEvents:function(){var A=this;A.eachContainer(function(aM){var L=aM.one(V+q);if(L){L.val(A.get(aj));L.detach("change");L.on("change",function(aO){var aN=A.get(aj);try{aN=aO.target.val();}catch(aP){}A.set(p,1);A.set(aj,aN);A.changeRequest();});}});},_delegateDOM:function(){var A=this;A.eachContainer(function(aM,L){aM.delegate("click",ag.bind(A._onClickFirstLinkEl,A),V+aK);aM.delegate("click",ag.bind(A._onClickPrevLinkEl,A),V+an);aM.delegate("click",ag.bind(A._onClickPageLinkEl,A),V+ao);aM.delegate("click",ag.bind(A._onClickNextLinkEl,A),V+d);aM.delegate("click",ag.bind(A._onClickLastLinkEl,A),V+l);});}}});ag.Paginator=D;},"@VERSION@",{requires:["aui-base"],skinnable:true});